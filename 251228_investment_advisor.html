<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ•è³‡ä¿¡è¨—ãŠã™ã™ã‚è¨ºæ–­</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .question-section {
            margin-bottom: 30px;
        }

        .question-section.hidden {
            display: none;
        }

        .question-label {
            display: block;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 10px;
            font-size: 14px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-size: 15px;
        }

        .option:hover {
            border-color: #667eea;
            background: #f5f7ff;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #666;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #d0d0d0;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-section {
            display: none;
        }

        .result-section.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .ranking-item {
            background: linear-gradient(135deg, #f5f7ff 0%, #ffffff 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .ranking-item:nth-child(1) {
            border-left-color: #ffd700;
        }

        .ranking-item:nth-child(2) {
            border-left-color: #c0c0c0;
        }

        .ranking-item:nth-child(3) {
            border-left-color: #cd7f32;
        }

        .rank-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .rank-1 { background: #ffd700; color: #333; }
        .rank-2 { background: #c0c0c0; color: #333; }
        .rank-3 { background: #cd7f32; color: white; }

        .fund-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .fund-type {
            color: #667eea;
            font-size: 13px;
            margin-bottom: 10px;
        }

        .fund-description {
            color: #666;
            line-height: 1.6;
            font-size: 14px;
        }

        .advice-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .advice-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .advice-text {
            line-height: 1.8;
            font-size: 14px;
        }

        .restart-btn {
            width: 100%;
            margin-top: 20px;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 24px;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="questionnaire">
            <h1>ğŸ’° æŠ•è³‡ä¿¡è¨—ãŠã™ã™ã‚è¨ºæ–­</h1>
            <p class="subtitle">5ã¤ã®è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã«ã´ã£ãŸã‚Šã®æŠ•è³‡ä¿¡è¨—ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†</p>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>

            <!-- è³ªå•1: å¹´é½¢ -->
            <div class="question-section" id="q1">
                <label class="question-label">
                    <span class="question-number">1</span>
                    ã‚ãªãŸã®å¹´é½¢ã‚’æ•™ãˆã¦ãã ã•ã„
                </label>
                <div class="options">
                    <div class="option" data-value="20s">20ä»£</div>
                    <div class="option" data-value="30s">30ä»£</div>
                    <div class="option" data-value="40s">40ä»£</div>
                    <div class="option" data-value="50s">50ä»£</div>
                    <div class="option" data-value="60s">60ä»£ä»¥ä¸Š</div>
                </div>
            </div>

            <!-- è³ªå•2: æŠ•è³‡çµŒé¨“ -->
            <div class="question-section hidden" id="q2">
                <label class="question-label">
                    <span class="question-number">2</span>
                    æŠ•è³‡çµŒé¨“ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
                </label>
                <div class="options">
                    <div class="option" data-value="none">å…¨ããªã„</div>
                    <div class="option" data-value="beginner">å°‘ã—ã‚ã‚‹ï¼ˆ1å¹´æœªæº€ï¼‰</div>
                    <div class="option" data-value="intermediate">ã‚ã‚‹ç¨‹åº¦ã‚ã‚‹ï¼ˆ1-5å¹´ï¼‰</div>
                    <div class="option" data-value="advanced">è±Šå¯Œã«ã‚ã‚‹ï¼ˆ5å¹´ä»¥ä¸Šï¼‰</div>
                </div>
            </div>

            <!-- è³ªå•3: ç¯€ç´„ã¸ã®èˆˆå‘³ -->
            <div class="question-section hidden" id="q3">
                <label class="question-label">
                    <span class="question-number">3</span>
                    ç¯€ç´„ã‚„è³‡ç”£å½¢æˆã«èˆˆå‘³ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ
                </label>
                <div class="options">
                    <div class="option" data-value="high">ã¨ã¦ã‚‚èˆˆå‘³ãŒã‚ã‚‹</div>
                    <div class="option" data-value="medium">èˆˆå‘³ãŒã‚ã‚‹</div>
                    <div class="option" data-value="low">ã‚ã¾ã‚Šèˆˆå‘³ãŒãªã„</div>
                </div>
            </div>

            <!-- è³ªå•4: è²¯è“„ -->
            <div class="question-section hidden" id="q4">
                <label class="question-label">
                    <span class="question-number">4</span>
                    æŠ•è³‡ã«å›ã›ã‚‹è²¯è“„ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
                </label>
                <div class="options">
                    <div class="option" data-value="plenty">ååˆ†ã«ã‚ã‚‹ï¼ˆ100ä¸‡å††ä»¥ä¸Šï¼‰</div>
                    <div class="option" data-value="moderate">ã‚ã‚‹ç¨‹åº¦ã‚ã‚‹ï¼ˆ30-100ä¸‡å††ï¼‰</div>
                    <div class="option" data-value="little">å°‘ã—ã‚ã‚‹ï¼ˆ10-30ä¸‡å††ï¼‰</div>
                    <div class="option" data-value="minimal">å°‘é¡ã‹ã‚‰å§‹ã‚ãŸã„ï¼ˆ10ä¸‡å††æœªæº€ï¼‰</div>
                </div>
            </div>

            <!-- è³ªå•5: NISAåˆ©ç”¨ -->
            <div class="question-section hidden" id="q5">
                <label class="question-label">
                    <span class="question-number">5</span>
                    NISAã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ
                </label>
                <div class="options">
                    <div class="option" data-value="using">åˆ©ç”¨ã—ã¦ã„ã‚‹</div>
                    <div class="option" data-value="planning">åˆ©ç”¨ã‚’æ¤œè¨ã—ã¦ã„ã‚‹</div>
                    <div class="option" data-value="not">åˆ©ç”¨ã—ã¦ã„ãªã„ãƒ»çŸ¥ã‚‰ãªã„</div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="prevBtn" style="display:none;">æˆ»ã‚‹</button>
                <button class="btn btn-primary" id="nextBtn" disabled>æ¬¡ã¸</button>
            </div>
        </div>

        <div class="result-section" id="results">
            <h1>ğŸ¯ ã‚ãªãŸã«ãŠã™ã™ã‚ã®æŠ•è³‡ä¿¡è¨—</h1>
            <p class="subtitle">è¨ºæ–­çµæœã«åŸºã¥ã„ãŸTOP3ã‚’ã”ç´¹ä»‹ã—ã¾ã™</p>
            
            <div id="rankingList"></div>
            
            <div class="advice-section">
                <div class="advice-title">
                    ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹
                </div>
                <div class="advice-text" id="adviceText"></div>
            </div>

            <button class="btn btn-primary restart-btn" id="restartBtn">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
        </div>
    </div>

    <script>
        const answers = {
            age: '',
            experience: '',
            interest: '',
            savings: '',
            nisa: ''
        };

        let currentQuestion = 1;
        const totalQuestions = 5;

        // æŠ•è³‡ä¿¡è¨—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const fundDatabase = {
            conservative: [
                {
                    name: 'eMAXIS Slim å›½å†…å‚µåˆ¸ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹',
                    type: 'å›½å†…å‚µåˆ¸å‹',
                    description: 'æ—¥æœ¬ã®å‚µåˆ¸ã«æŠ•è³‡ã™ã‚‹ä½ãƒªã‚¹ã‚¯ãƒ»ä½ã‚³ã‚¹ãƒˆãƒ•ã‚¡ãƒ³ãƒ‰ã€‚å®‰å®šã—ãŸé‹ç”¨ã‚’ç›®æŒ‡ã™æ–¹ã«æœ€é©ã§ã€å€¤å‹•ããŒç©ã‚„ã‹ã§ã™ã€‚'
                },
                {
                    name: 'ãƒ‹ãƒƒã‚»ã‚¤æ—¥æœ¬å‚µåˆ¸ãƒ•ã‚¡ãƒ³ãƒ‰',
                    type: 'å›½å†…å‚µåˆ¸å‹',
                    description: 'æ—¥æœ¬å›½å‚µã‚’ä¸­å¿ƒã«æŠ•è³‡ã—ã€å®‰å®šã—ãŸãƒªã‚¿ãƒ¼ãƒ³ã‚’è¿½æ±‚ã€‚åˆå¿ƒè€…ã§ã‚‚å®‰å¿ƒã—ã¦ä¿æœ‰ã§ãã‚‹å•†å“ã§ã™ã€‚'
                },
                {
                    name: 'ãŸã‚ã‚‰ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ å…ˆé€²å›½å‚µåˆ¸',
                    type: 'å¤–å›½å‚µåˆ¸å‹',
                    description: 'å…ˆé€²å›½ã®å‚µåˆ¸ã«åˆ†æ•£æŠ•è³‡ã€‚ç‚ºæ›¿ãƒªã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã™ãŒã€å›½å†…å‚µåˆ¸ã‚ˆã‚Šé«˜ã‚ã®ãƒªã‚¿ãƒ¼ãƒ³ãŒæœŸå¾…ã§ãã¾ã™ã€‚'
                }
            ],
            balanced: [
                {
                    name: 'eMAXIS Slim ãƒãƒ©ãƒ³ã‚¹ï¼ˆ8è³‡ç”£å‡ç­‰å‹ï¼‰',
                    type: 'ãƒãƒ©ãƒ³ã‚¹å‹',
                    description: 'å›½å†…å¤–ã®æ ªå¼ãƒ»å‚µåˆ¸ãƒ»REITã«å‡ç­‰åˆ†æ•£æŠ•è³‡ã€‚ãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚ŒãŸä¸‡èƒ½å‹ãƒ•ã‚¡ãƒ³ãƒ‰ã§ã™ã€‚'
                },
                {
                    name: 'ã‚»ã‚¾ãƒ³ãƒ»ãƒãƒ³ã‚¬ãƒ¼ãƒ‰ãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒ©ãƒ³ã‚¹ãƒ•ã‚¡ãƒ³ãƒ‰',
                    type: 'ãƒãƒ©ãƒ³ã‚¹å‹',
                    description: 'ä¸–ç•Œä¸­ã®æ ªå¼ã¨å‚µåˆ¸ã«åˆ†æ•£æŠ•è³‡ã€‚é•·æœŸæŠ•è³‡ã«é©ã—ãŸè¨­è¨ˆã§ã€åˆå¿ƒè€…ã‹ã‚‰çµŒé¨“è€…ã¾ã§äººæ°—ã®å•†å“ã§ã™ã€‚'
                },
                {
                    name: 'é‡æ‘6è³‡ç”£å‡ç­‰ãƒãƒ©ãƒ³ã‚¹',
                    type: 'ãƒãƒ©ãƒ³ã‚¹å‹',
                    description: '6ã¤ã®è³‡ç”£ã«å‡ç­‰é…åˆ†ã—ã€å®‰å®šæ€§ã¨æˆé•·æ€§ã‚’ä¸¡ç«‹ã€‚å®šæœŸçš„ãªãƒªãƒãƒ©ãƒ³ã‚¹ã§è³‡ç”£é…åˆ†ã‚’ç¶­æŒã—ã¾ã™ã€‚'
                }
            ],
            growth: [
                {
                    name: 'eMAXIS Slim å…¨ä¸–ç•Œæ ªå¼ï¼ˆã‚ªãƒ¼ãƒ«ãƒ»ã‚«ãƒ³ãƒˆãƒªãƒ¼ï¼‰',
                    type: 'å…¨ä¸–ç•Œæ ªå¼å‹',
                    description: 'ä¸–ç•Œä¸­ã®æ ªå¼ã«æŠ•è³‡ã™ã‚‹äººæ°—No.1ãƒ•ã‚¡ãƒ³ãƒ‰ã€‚ã“ã‚Œä¸€æœ¬ã§ä¸–ç•ŒçµŒæ¸ˆã®æˆé•·ã‚’å–ã‚Šè¾¼ã‚ã¾ã™ã€‚é•·æœŸä¿æœ‰ã«æœ€é©ã§ã™ã€‚'
                },
                {
                    name: 'eMAXIS Slim ç±³å›½æ ªå¼ï¼ˆS&P500ï¼‰',
                    type: 'ç±³å›½æ ªå¼å‹',
                    description: 'ç±³å›½ã®ä»£è¡¨çš„ãª500ç¤¾ã«æŠ•è³‡ã€‚ä¸–ç•ŒçµŒæ¸ˆã‚’ç‰½å¼•ã™ã‚‹ç±³å›½æ ªã®æˆé•·ã‚’äº«å—ã§ãã¾ã™ã€‚'
                },
                {
                    name: 'æ¥½å¤©ãƒ»å…¨ç±³æ ªå¼ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰',
                    type: 'ç±³å›½æ ªå¼å‹',
                    description: 'ç±³å›½æ ªå¼å¸‚å ´å…¨ä½“ã«æŠ•è³‡ã€‚å¤§å‹æ ªã‹ã‚‰å°å‹æ ªã¾ã§å¹…åºƒãã‚«ãƒãƒ¼ã—ã€ç±³å›½çµŒæ¸ˆã®æˆé•·ã‚’æ‰ãˆã¾ã™ã€‚'
                }
            ],
            aggressive: [
                {
                    name: 'eMAXIS Slim ç±³å›½æ ªå¼ï¼ˆS&P500ï¼‰',
                    type: 'ç±³å›½æ ªå¼å‹',
                    description: 'ç±³å›½ã®ä¸»è¦ä¼æ¥­500ç¤¾ã«æŠ•è³‡ã€‚é«˜ã„æˆé•·ãŒæœŸå¾…ã§ãã¾ã™ãŒã€çŸ­æœŸçš„ãªå€¤å‹•ãã‚‚å¤§ãã‚ã§ã™ã€‚'
                },
                {
                    name: 'iFreeNEXT FANG+ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹',
                    type: 'ãƒ†ãƒ¼ãƒå‹æ ªå¼',
                    description: 'GAFAMãªã©ç±³å›½ã®æ¬¡ä¸–ä»£ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ä¼æ¥­ã«é›†ä¸­æŠ•è³‡ã€‚é«˜ãƒªã‚¹ã‚¯ãƒ»é«˜ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç‹™ã†æ–¹å‘ã‘ã§ã™ã€‚'
                },
                {
                    name: 'eMAXIS Slim æ–°èˆˆå›½æ ªå¼ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹',
                    type: 'æ–°èˆˆå›½æ ªå¼å‹',
                    description: 'æˆé•·è‘—ã—ã„æ–°èˆˆå›½ã®æ ªå¼ã«æŠ•è³‡ã€‚é«˜ã„ãƒªã‚¿ãƒ¼ãƒ³ãŒæœŸå¾…ã§ãã¾ã™ãŒã€å€¤å‹•ãã¯æ¿€ã—ã‚ã§ã™ã€‚'
                }
            ],
            nisaFriendly: [
                {
                    name: 'eMAXIS Slim å…¨ä¸–ç•Œæ ªå¼ï¼ˆã‚ªãƒ¼ãƒ«ãƒ»ã‚«ãƒ³ãƒˆãƒªãƒ¼ï¼‰',
                    type: 'å…¨ä¸–ç•Œæ ªå¼å‹',
                    description: 'ã¤ã¿ãŸã¦NISAå¯¾è±¡å•†å“ã€‚ä¸–ç•ŒçµŒæ¸ˆå…¨ä½“ã®æˆé•·ã‚’å–ã‚Šè¾¼ã¿ã€é•·æœŸã®è³‡ç”£å½¢æˆã«æœ€é©ã§ã™ã€‚'
                },
                {
                    name: 'SBIãƒ»Vãƒ»S&P500ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰',
                    type: 'ç±³å›½æ ªå¼å‹',
                    description: 'ã¤ã¿ãŸã¦NISAå¯¾è±¡ã€‚è¶…ä½ã‚³ã‚¹ãƒˆã§ç±³å›½ã®ä¸»è¦ä¼æ¥­ã«æŠ•è³‡ã§ãã€é•·æœŸä¿æœ‰ã§å¤§ããªæˆæœãŒæœŸå¾…ã§ãã¾ã™ã€‚'
                },
                {
                    name: 'æ¥½å¤©ãƒ»å…¨ä¸–ç•Œæ ªå¼ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ»ãƒ•ã‚¡ãƒ³ãƒ‰',
                    type: 'å…¨ä¸–ç•Œæ ªå¼å‹',
                    description: 'ã¤ã¿ãŸã¦NISAå¯¾è±¡ã€‚æ¥½å¤©è¨¼åˆ¸ã§äººæ°—ã®ãƒ•ã‚¡ãƒ³ãƒ‰ã§ã€ä¸–ç•Œä¸­ã®æ ªå¼ã«ä½ã‚³ã‚¹ãƒˆã§æŠ•è³‡ã§ãã¾ã™ã€‚'
                }
            ]
        };

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const parent = this.parentElement;
                parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                const questionId = this.closest('.question-section').id;
                const value = this.dataset.value;
                
                switch(questionId) {
                    case 'q1': answers.age = value; break;
                    case 'q2': answers.experience = value; break;
                    case 'q3': answers.interest = value; break;
                    case 'q4': answers.savings = value; break;
                    case 'q5': answers.nisa = value; break;
                }
                
                document.getElementById('nextBtn').disabled = false;
            });
        });

        document.getElementById('nextBtn').addEventListener('click', function() {
            if (currentQuestion < totalQuestions) {
                document.getElementById('q' + currentQuestion).classList.add('hidden');
                currentQuestion++;
                document.getElementById('q' + currentQuestion).classList.remove('hidden');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('prevBtn').style.display = 'block';
                
                // æ—¢ã«é¸æŠæ¸ˆã¿ã®å ´åˆã¯æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                const currentOptions = document.getElementById('q' + currentQuestion).querySelectorAll('.option');
                const hasSelected = Array.from(currentOptions).some(opt => opt.classList.contains('selected'));
                if (hasSelected) {
                    document.getElementById('nextBtn').disabled = false;
                }
                
                if (currentQuestion === totalQuestions) {
                    document.getElementById('nextBtn').textContent = 'è¨ºæ–­çµæœã‚’è¦‹ã‚‹';
                }
                
                updateProgress();
            } else {
                showResults();
            }
        });

        document.getElementById('prevBtn').addEventListener('click', function() {
            document.getElementById('q' + currentQuestion).classList.add('hidden');
            currentQuestion--;
            document.getElementById('q' + currentQuestion).classList.remove('hidden');
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').textContent = 'æ¬¡ã¸';
            
            if (currentQuestion === 1) {
                document.getElementById('prevBtn').style.display = 'none';
            }
            
            updateProgress();
        });

        document.getElementById('restartBtn').addEventListener('click', function() {
            location.reload();
        });

        function updateProgress() {
            const progress = ((currentQuestion - 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function calculateRecommendations() {
            let riskScore = 0;
            
            // å¹´é½¢ã«ã‚ˆã‚‹ãƒªã‚¹ã‚¯è¨±å®¹åº¦
            if (answers.age === '20s' || answers.age === '30s') riskScore += 3;
            else if (answers.age === '40s') riskScore += 2;
            else if (answers.age === '50s') riskScore += 1;
            else riskScore += 0;
            
            // æŠ•è³‡çµŒé¨“
            if (answers.experience === 'advanced') riskScore += 3;
            else if (answers.experience === 'intermediate') riskScore += 2;
            else if (answers.experience === 'beginner') riskScore += 1;
            
            // è³‡ç”£å½¢æˆã¸ã®èˆˆå‘³
            if (answers.interest === 'high') riskScore += 2;
            else if (answers.interest === 'medium') riskScore += 1;
            
            // è²¯è“„çŠ¶æ³
            if (answers.savings === 'plenty') riskScore += 2;
            else if (answers.savings === 'moderate') riskScore += 1;
            
            // NISAåˆ©ç”¨çŠ¶æ³ã‚’è€ƒæ…®
            const useNisa = answers.nisa === 'using' || answers.nisa === 'planning';
            
            // ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ã«åŸºã¥ã„ã¦æ¨å¥¨ã‚«ãƒ†ã‚´ãƒªã‚’æ±ºå®š
            let recommendations = [];
            
            if (riskScore >= 9 && useNisa) {
                recommendations = fundDatabase.nisaFriendly;
            } else if (riskScore >= 9) {
                recommendations = fundDatabase.aggressive;
            } else if (riskScore >= 6) {
                recommendations = fundDatabase.growth;
            } else if (riskScore >= 3) {
                recommendations = fundDatabase.balanced;
            } else {
                recommendations = fundDatabase.conservative;
            }
            
            return recommendations;
        }

        function generateAdvice() {
            let advice = '';
            
            // å¹´é½¢ã«åŸºã¥ãã‚¢ãƒ‰ãƒã‚¤ã‚¹
            if (answers.age === '20s' || answers.age === '30s') {
                advice += 'è‹¥ã„ã†ã¡ã¯æ™‚é–“ã‚’å‘³æ–¹ã«ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚é•·æœŸæŠ•è³‡ã§è¤‡åˆ©åŠ¹æœã‚’æœ€å¤§é™ã«æ´»ç”¨ã—ã¾ã—ã‚‡ã†ã€‚';
            } else if (answers.age === '40s') {
                advice += 'è³‡ç”£å½¢æˆã®é‡è¦ãªæ™‚æœŸã§ã™ã€‚ãƒªã‚¹ã‚¯ã¨ãƒªã‚¿ãƒ¼ãƒ³ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚ŠãªãŒã‚‰ç€å®Ÿã«è³‡ç”£ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†ã€‚';
            } else if (answers.age === '50s') {
                advice += 'è€å¾Œè³‡é‡‘ã®æº–å‚™æœŸã§ã™ã€‚å®‰å®šæ€§ã‚’é‡è¦–ã—ã¤ã¤ã€é©åº¦ãªæˆé•·ã‚‚ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚';
            } else {
                advice += 'è³‡ç”£ã®ä¿å…¨ãŒé‡è¦ãªæ™‚æœŸã§ã™ã€‚å®‰å®šã—ãŸé‹ç”¨ã‚’å¿ƒãŒã‘ã€å¤§ããªãƒªã‚¹ã‚¯ã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚';
            }
            
            advice += '<br><br>';
            
            // æŠ•è³‡çµŒé¨“ã«åŸºã¥ãã‚¢ãƒ‰ãƒã‚¤ã‚¹
            if (answers.experience === 'none' || answers.experience === 'beginner') {
                advice += 'ã¾ãšã¯å°‘é¡ã‹ã‚‰å§‹ã‚ã¦ã€æŠ•è³‡ã«æ…£ã‚Œã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚';
            } else {
                advice += 'çµŒé¨“ã‚’æ´»ã‹ã—ã¦ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®æœ€é©åŒ–ã‚’å›³ã‚Šã¾ã—ã‚‡ã†ã€‚';
            }
            
            advice += '<br><br>';
            
            // NISAã«é–¢ã™ã‚‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹
            if (answers.nisa === 'not') {
                advice += 'ğŸ’¡ <strong>NISAåˆ¶åº¦ã®æ´»ç”¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ï¼</strong> æŠ•è³‡åˆ©ç›ŠãŒéèª²ç¨ã«ãªã‚‹ãŸã‚ã€é•·æœŸæŠ•è³‡ã«æœ€é©ã§ã™ã€‚';
            } else if (answers.nisa === 'planning') {
                advice += 'ğŸ’¡ NISAå£åº§ã‚’é–‹è¨­ã—ãŸã‚‰ã€ã¾ãšã¯ã¤ã¿ãŸã¦æŠ•è³‡ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚æ¯æœˆã‚³ãƒ„ã‚³ãƒ„ã¨ç©ã¿ç«‹ã¦ã‚‹ã“ã¨ã§ã€ãƒªã‚¹ã‚¯ã‚’åˆ†æ•£ã§ãã¾ã™ã€‚';
            } else {
                advice += 'ğŸ’¡ NISAæ ã‚’æœ€å¤§é™æ´»ç”¨ã—ã€éèª²ç¨ãƒ¡ãƒªãƒƒãƒˆã‚’äº«å—ã—ã¾ã—ã‚‡ã†ã€‚å¹´é–“ã®æŠ•è³‡æ ã‚’è¨ˆç”»çš„ã«ä½¿ã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚';
            }
            
            return advice;
        }

        function showResults() {
            const recommendations = calculateRecommendations();
            const rankingList = document.getElementById('rankingList');
            
            rankingList.innerHTML = '';
            recommendations.forEach((fund, index) => {
                const rankClass = `rank-${index + 1}`;
                const item = document.createElement('div');
                item.className = 'ranking-item';
                item.innerHTML = `
                    <div class="rank-badge ${rankClass}">ç¬¬${index + 1}ä½</div>
                    <div class="fund-name">${fund.name}</div>
                    <div class="fund-type">${fund.type}</div>
                    <div class="fund-description">${fund.description}</div>
                `;
                rankingList.appendChild(item);
            });
            
            document.getElementById('adviceText').innerHTML = generateAdvice();
            document.getElementById('questionnaire').style.display = 'none';
            document.getElementById('results').classList.add('show');
            document.getElementById('progressBar').style.width = '100%';
        }

        // åˆæœŸåŒ–
        updateProgress();
    </script>
</body>
</html>